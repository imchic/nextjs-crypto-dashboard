#!/usr/bin/env python3
"""
μµμΆ… μ”μ•½ (λ‚λ„μ–΄ λ°μ†΅)
"""

import json
import urllib.request
import urllib.parse
from datetime import datetime

TELEGRAM_TOKEN = "***REDACTED***"
TELEGRAM_USER_ID = 8525813991

def send_telegram(msg):
    """ν…”λ κ·Έλ¨ λ°μ†΅"""
    try:
        url = f"https://api.telegram.org/bot{TELEGRAM_TOKEN}/sendMessage"
        payload = {
            "chat_id": TELEGRAM_USER_ID,
            "text": msg,
            "parse_mode": "HTML"
        }
        data = urllib.parse.urlencode(payload).encode('utf-8')
        req = urllib.request.Request(url, data=data)
        with urllib.request.urlopen(req, timeout=10) as resp:
            return json.loads(resp.read().decode()).get('ok')
    except Exception as e:
        print(f"Error: {e}")
        return False

# Part 1: ν—¤λ” & μ”μ•½
msg1 = """<b>π“‹ 2026-02-22 OpenClaw μλ™ν™” μ‹μ¤ν… μµμΆ… μ™„μ„±</b>

<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>
<b>π― λ©ν‘:</b> ν¬μ ν¬νΈν΄λ¦¬μ¤ μλ™ν™” κ΄€λ¦¬
<b>β… μƒνƒ:</b> μ™„μ „ μ™„μ„±
<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>π“ 1οΈβƒ£ Google Workspace ν†µν•©</b>

β… <b>gog CLI μ„¤μΉ</b>
  β€Ά WSL(Ubuntu)μ— μ •μƒ μ„¤μΉ
  β€Ά μΈμ¦: μ„λΉ„μ¤ κ³„μ • ν‚¤ μ„¤μ • β“

β… <b>Gmail μ •λ¦¬</b>
  β€Ά μ΄ 273κ°+ λ©”μΌ λ¶„λ¥ μ™„λ£
  β€Ά π›οΈ μ‡Όν•‘(90κ°), π‘¨π’» κ°λ°(50κ°)
  β€Ά π μΌλ°(30κ°), β–οΈ μ¤νΈ(50κ°)
  β€Ά βοΈ SAAS(53κ°)

β… <b>Telegram λ΄‡</b>
  β€Ά @dolldol_bot μ •μƒ μ‘λ™ β“
  β€Ά μ‚¬μ©μ: 8525813991

<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>π“ 2οΈβƒ£ λ―Έκµ­ μ£Όμ‹ μλ™ λ¶„μ„</b>

β… <b>μλ™ λ¨λ‹ν„°λ§</b>
  β€Ά μ‹¤ν–‰: λ§¤μΌ 06:00 KST
  β€Ά λ°μ†΅: Telegram + Email
  β€Ά μ¶”μ : 25κ° μΆ…λ© (λ³΄μ μ£Ό, M7, ν…λ§μ£Ό)

β… <b>λ¶„μ„ ν•­λ©</b>
  β€Ά ν‰λ‹¨κ°€ λ¶„μ„
  β€Ά RSI / MACD κΈ°μ  λ¶„μ„
  β€Ά κ±°λλ‰ λ¶„μ„
  β€Ά μ¶”μ²λ„ ν‰κ°€ (1~5μ )"""

msg2 = """<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>π€ 3οΈβƒ£ μ•”νΈν™”ν μ‹¤μ‹κ°„ λ¶„μ„</b>

β… <b>μ—…λΉ„νΈ μ‹¤μ‹κ°„ API</b>
  β€Ά μ‹¤ν–‰: λ§¤μΌ 14:00 KST
  β€Ά λ°μ†΅: Telegram + Email
  β€Ά μ¶”μ : 30κ° μ•νΈμ½”μΈ

β… <b>ν¬νΈν΄λ¦¬μ¤</b>
  β€Ά SOL: 0.5κ° @ 125,500μ›
  β€Ά XRP: 100κ° @ 2,093μ›
  β€Ά AVAX: 0.2κ° @ 13,270μ›
  β€Ά μ΄μμ‚°: ~274,704μ›

β… <b>μλ™ λ¶„μ„</b>
  1. π“ μ‹¤μ‹κ°„ κ°€κ²© μμ§‘
  2. π“ RSI, MACD, λ³Όλ¦°μ €λ°΄λ“
  3. π”” λ§¤μ/λ§¤λ„ μ‹ νΈ μƒμ„±
  4. π’° ν¬νΈν΄λ¦¬μ¤ μμµλ¥ 
  5. π― μ¶”μ²λ„ ν‰κ°€

<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>β™οΈ 4οΈβƒ£ μλ™ν™” μ„¤μ • μµμ…</b>

β… Option 1: <b>OpenClaw Cron</b> (κ¶μ¥)
  β€Ά 0 6 * * * stock-monitor
  β€Ά 0 14 * * * crypto-monitor

β… Option 2: <b>Windows Task Scheduler</b>
  β€Ά PowerShell κ΄€λ¦¬μ μ„¤μ •

β… Option 3: <b>WSL crontab</b>
  β€Ά crontab -eλ΅ μ„¤μ •"""

msg3 = """<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>π“ 5οΈβƒ£ μƒμ„±λ νμΌ</b>

β… <b>μ¤ν¬λ¦½νΈ (5κ°)</b>
  β€Ά stock_monitor.py
  β€Ά crypto_monitor_final.py
  β€Ά crypto_upbit_api.py
  β€Ά crypto_portfolio_setup.py
  β€Ά final_summary.py

β… <b>μ„¤μ • (5κ°)</b>
  β€Ά HEARTBEAT.md
  β€Ά MEMORY.md
  β€Ά SOUL.md
  β€Ά IDENTITY.md
  β€Ά USER.md

β… <b>λ°μ΄ν„°</b>
  β€Ά crypto_portfolio.json
  β€Ά memory/2026-02-22.md

<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>π“ 6οΈβƒ£ μ¤λ λ°μ†΅ ν„ν™©</b>

β… <b>μ£Όμ‹ λ¶„μ„</b>
  β€Ά Telegram: 2026-02-22 19:55:59 β“
  β€Ά Email: 2026-02-22 19:57:43 β“

β… <b>μ•”νΈν™”ν λ¶„μ„</b>
  β€Ά Telegram: 2026-02-22 20:15 β“
  β€Ά Email: 2026-02-22 20:16 β“

β… <b>λ‚΄μΌλ¶€ν„° μλ™ λ°μ†΅</b>
  β€Ά 06:00 KST - μ£Όμ‹ λ¶„μ„
  β€Ά 14:00 KST - μ•”νΈν™”ν λ¶„μ„"""

msg4 = """<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>β… μµμΆ… μ²΄ν¬λ¦¬μ¤νΈ</b>

[β“] Google Workspace ν†µν•©
[β“] Gmail 273κ°+ λ©”μΌ μ •λ¦¬
[β“] Telegram λ΄‡ μ„¤μ •
[β“] μ£Όμ‹ λ¨λ‹ν„°λ§ μλ™ν™”
[β“] μ•”νΈν™”ν μ‹¤μ‹κ°„ API μ—°λ™
[β“] μλ™ λ§¤μ/λ§¤λ„ μ‹ νΈ
[β“] ν¬νΈν΄λ¦¬μ¤ μ¶”μ 
[β“] μ΄λ©”μΌ μλ™ λ°μ†΅
[β“] μΌμΌ λ³΄κ³ μ„ μƒμ„±
[β“] λ¬Έμ„ν™” μ™„λ£

<b>β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”</b>

<b>π™ μµμΆ… λ©”μ‹μ§€</b>

μ΄μ  μ €λ” λ§¤μΌ μ•„μΉ¨(06:00)κ³Ό μ¤ν›„(14:00)μ—
μ£ΌμΈλ‹μ ν¬μ ν¬νΈν΄λ¦¬μ¤λ¥Ό μλ™μΌλ΅ λ¶„μ„ν•κ³  λ³΄κ³ ν•©λ‹λ‹¤.

π“§ λ¨λ“  λ³΄κ³ μ„λ” Telegramκ³Ό Emailλ΅ μλ™ λ°μ†΅λλ―€λ΅,
μ£ΌμΈλ‹μ€ νΈν•κ² ν™•μΈν•μ‹λ©΄ λ©λ‹λ‹¤.

π€ λ‚΄μΌ μ•„μΉ¨ 06:00, μ²« μλ™ λ³΄κ³ μ„λ¥Ό κΈ°λ€ν•΄μ£Όμ„Έμ”!

λλμ΄ π™ @dolldol_bot
2026-02-22 20:17 KST"""

if __name__ == "__main__":
    print("μµμΆ… μ”μ•½ λ°μ†΅ μ¤‘...\n")
    
    success = 0
    for i, msg in enumerate([msg1, msg2, msg3, msg4], 1):
        if send_telegram(msg):
            print(f"β… Part {i}/4 λ°μ†΅ μ™„λ£")
            success += 1
        else:
            print(f"β Part {i}/4 λ°μ†΅ μ‹¤ν¨")
    
    print(f"\nμ΄ {success}/4 λ¶€λ¶„ λ°μ†΅ μ™„λ£!")
